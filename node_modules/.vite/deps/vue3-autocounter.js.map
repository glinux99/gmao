{
  "version": 3,
  "sources": ["../../vue3-autocounter/dist/vue3-autocounter.esm.js"],
  "sourcesContent": ["import { defineComponent, openBlock, createElementBlock, toDisplayString } from 'vue';\n\nvar script = defineComponent({\n  name: \"Vue3Autocounter\",\n  interval: null,\n  props: {\n    startAmount: {\n      type: Number,\n      default: 0\n    },\n    endAmount: {\n      type: Number,\n      default: 0,\n      required: true\n    },\n    duration: {\n      type: Number,\n      default: 3,\n      validator(duration) {\n        return duration > 0;\n      }\n    },\n    autoinit: {\n      type: Boolean,\n      default: true\n    },\n    prefix: {\n      type: String,\n      default: ''\n    },\n    suffix: {\n      type: String,\n      default: ''\n    },\n    separator: {\n      type: String,\n      default: ','\n    },\n    decimalSeparator: {\n      type: String,\n      default: '.'\n    },\n    decimals: {\n      type: Number,\n      default: 0,\n      validator(decimals) {\n        return decimals >= 0;\n      }\n    }\n  },\n  data() {\n    return {\n      timestamp: 0,\n      startTimestamp: 0,\n      currentAmount: 0,\n      currentStartAmount: 0,\n      currentDuration: 0,\n      paused: false,\n      remaining: 0,\n      animationFrame: 0\n    };\n  },\n  mounted() {\n    this.currentAmount = this.startAmount;\n    this.currentStartAmount = this.startAmount;\n    this.currentDuration = this.duration * 1000;\n    this.remaining = this.duration * 1000;\n    if (this.autoinit) this.start();else this.paused = true;\n    this.$emit('mounted');\n  },\n  unmounted() {\n    this.cancelAnimation();\n  },\n  watch: {\n    startAmount() {\n      this.reset();\n    },\n    endAmount() {\n      this.reset();\n    },\n    duration() {\n      this.reset();\n    }\n  },\n  computed: {\n    isCountingUp() {\n      return this.endAmount > this.startAmount;\n    },\n    displayedAmount() {\n      return `${this.prefix}${this.formatedAmount}${this.suffix}`;\n    },\n    formatedAmount() {\n      const regex = /(\\d+)(\\d{3})/;\n      let numberString = this.currentAmount.toFixed(this.decimals);\n      numberString += '';\n      let numberArray = numberString.split('.');\n      let numbers = numberArray[0];\n      let decimals = numberArray.length > 1 ? this.decimalSeparator + numberArray[1] : '';\n      let isNumber = !isNaN(parseFloat(this.separator));\n      if (this.separator && !isNumber) {\n        while (regex.test(numbers)) numbers = numbers.replace(regex, '$1' + this.separator + '$2');\n      }\n      return numbers + decimals;\n    }\n  },\n  methods: {\n    start() {\n      this.cancelAnimation();\n      this.currentStartAmount = this.startAmount;\n      this.startTimestamp = null;\n      this.currentDuration = this.duration * 1000;\n      this.paused = false;\n      this.animationFrame = window.requestAnimationFrame(this.counting);\n    },\n    pause() {\n      if (this.paused) return;\n      this.cancelAnimation();\n      this.paused = true;\n    },\n    resume() {\n      if (!this.paused) return;\n      this.startTimestamp = null;\n      this.currentDuration = +this.remaining;\n      this.currentStartAmount = +this.currentAmount;\n      this.animationFrame = window.requestAnimationFrame(this.counting);\n      this.paused = false;\n    },\n    reset() {\n      this.paused = false;\n      this.startTimestamp = null;\n      this.cancelAnimation();\n      this.currentAmount = this.startAmount;\n      if (this.autoinit) this.start();else this.paused = true;\n    },\n    counting(timestamp) {\n      this.timestamp = timestamp;\n      if (!this.startTimestamp) this.startTimestamp = timestamp;\n      let progress = timestamp - this.startTimestamp;\n      this.remaining = this.currentDuration - progress;\n      if (!this.isCountingUp) {\n        this.currentAmount = this.currentStartAmount - (this.currentStartAmount - this.endAmount) * (progress / this.currentDuration);\n        this.currentAmount = this.currentAmount < this.endAmount ? this.endAmount : this.currentAmount;\n      } else {\n        this.currentAmount = this.currentStartAmount + (this.endAmount - this.currentStartAmount) * (progress / this.currentDuration);\n        this.currentAmount = this.currentAmount > this.endAmount ? this.endAmount : this.currentAmount;\n      }\n      if (progress < this.currentDuration) this.animationFrame = window.requestAnimationFrame(this.counting);else this.$emit('finished');\n    },\n    cancelAnimation() {\n      if (this.animationFrame) window.cancelAnimationFrame(this.animationFrame);\n    }\n  }\n});\n\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"span\", null, toDisplayString(_ctx.displayedAmount), 1);\n}\n\nscript.render = render;\n\n// Import vue component\n\n// Define typescript interfaces for installable component\n\n// Default export is installable instance of component.\n// IIFE injects install function into component, allowing component\n// to be registered via Vue.use() as well as Vue.component(),\nvar entry_esm = /*#__PURE__*/(() => {\n  // Assign InstallableComponent type\n  const installable = script;\n\n  // Attach install function executed by Vue.use()\n  installable.install = app => {\n    app.component('Vue3Autocounter', installable);\n  };\n  return installable;\n})();\n\n// It's possible to expose named exports when writing components that can\n// also be used as directives, etc. - eg. import { RollupDemoDirective } from 'rollup-demo';\n// export const RollupDemoDirective = directive;\n\nexport { entry_esm as default };\n"],
  "mappings": "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",
  "names": []
}
